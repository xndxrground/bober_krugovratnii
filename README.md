–ü–∞—à–∞–µ–≤, –ú—è–∑–∏—Ç–æ–≤ 0907-33

# PseudoFS ‚Äì –ø—Ä–æ—Å—Ç–∞—è –ø—Å–µ–≤–¥–æ-—Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∞ C

> **PseudoFS** ‚Äì —É—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∏–π —Ä–∞–±–æ—Ç—É —Å —Å–∞–º–æ–ø–∏—Å–Ω—ã–º –ø–ª–æ—Å–∫–∏–º
> —Ñ–∞–π–ª–æ–º-‚Äú–¥–∏—Å–∫–æ–º‚Äù –∏ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–π —É—Ç–∏–ª–∏—Ç–æ–π-–∫–ª–∏–µ–Ω—Ç–æ–º. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å,
> —É–¥–∞–ª—è—Ç—å, —á–∏—Ç–∞—Ç—å –∏ –æ–±–Ω–æ–≤–ª—è—Ç—å —Ñ–∞–π–ª—ã –≤ –æ–¥–∏–Ω–æ—á–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ `disk.filesystem`
> —Å —á—Ä–µ–∑–≤—ã—á–∞–π–Ω–æ –ø—Ä–æ—Å—Ç—ã–º —Ç–µ–∫—Å—Ç–æ–≤—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º.

---

## ‚öôÔ∏è –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –∫–æ–º–ø–∏–ª—è—Ü–∏—è (Linux/macOS, —Ç—Ä–µ–±—É–µ—Ç—Å—è gcc)
$ gcc -std=c11 -Wall -Wextra -o pseudo_fs main.c filesystem.c

# –∑–∞–ø—É—Å–∫
$ ./pseudo_fs
–ü—Å–µ–≤–¥–æ-–§–° –∑–∞–≥—Ä—É–∂–µ–Ω–∞. –í–≤–µ–¥–∏—Ç–µ HELP –¥–ª—è –ø–æ–¥—Å–∫–∞–∑–∫–∏.
> 
```

‚ñ∂Ô∏è –ï—Å–ª–∏ —Ñ–∞–π–ª-–¥–∏—Å–∫ `disk.filesystem` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—É—Å—Ç–∞—è –§–°.
–ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ä–∞–±–æ—Ç—ã —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É `EXIT` –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
—Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —ç—Ç–æ—Ç —Ñ–∞–π–ª.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

| –§–∞–π–ª/–ø–∞–ø–∫–∞         | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                                        |
|--------------------|-------------------------------------------------------------------|
| `main.c`           | CLI-—É—Ç–∏–ª–∏—Ç–∞: –ø–∞—Ä—Å–∏–Ω–≥ –∫–æ–º–∞–Ω–¥, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å API —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã|
| `filesystem.c`     | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è in-memory –§–° –∏ –∑–∞–≥—Ä—É–∑–∫–∞/–≤—ã–≥—Ä—É–∑–∫–∞ –≤ `disk.filesystem`   |
| `filesystem.h`     | –ü—É–±–ª–∏—á–Ω—ã–π API (`fs_load`, `fs_select`, ‚Ä¶)                         |
| `disk.filesystem`  | –°–∞–º ¬´–¥–∏—Å–∫¬ª; —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –¥–∞–Ω–Ω—ã–º–∏                        |
| `README.md`        | –í—ã —á–∏—Ç–∞–µ—Ç–µ –µ–≥–æ —Å–µ–π—á–∞—Å                                            |
| `presentation.pptx`| –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è (–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –¥–µ–º–æ, –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã)                     |
| `logo.png`         | –õ–æ–≥–æ—Ç–∏–ø –ø—Ä–æ–µ–∫—Ç–∞                                                  |

---

## üìù –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞-–¥–∏—Å–∫–∞

```
/absolute/path/to/file1.txt
–ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ñ–∞–π–ª–∞ 1
–í—Ç–æ—Ä–∞—è —Å—Ç—Ä–æ–∫–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ñ–∞–π–ª–∞ 1
/another/file
–≤–µ—Å—å —Å–ª–µ–¥—É—é—â–∏–π —Ç–µ–∫—Å—Ç –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ —Ñ–∞–π–ª—É /another/file
/third
...
```

* –°—Ç—Ä–æ–∫–∞, –Ω–∞—á–∏–Ω–∞—é—â–∞—è—Å—è —Å —Å–∏–º–≤–æ–ª–∞ `/`, ‚Äî **–∏–º—è —Ñ–∞–π–ª–∞** (–ø–æ–ª–Ω—ã–π –ø—É—Ç—å).
* –í—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏ –≤–ø–ª–æ—Ç—å –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ `/` (–∏–ª–∏ –∫–æ–Ω—Ü–∞ —Ñ–∞–π–ª–∞)
  –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É —Ç–µ–∫—É—â–µ–≥–æ —Ñ–∞–π–ª–∞ –∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è **–∫–∞–∫ –µ—Å—Ç—å**.
* –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–∞—é—â–µ–≥–æ `\n` —É —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –±—ã—Ç—å –Ω–µ –¥–æ–ª–∂–Ω–æ ‚Äî –ø—Ä–∏
  —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–æ–±–∞–≤–∏—Ç –µ–≥–æ —Å–∞–º–∞, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–∞—Ä—Å–∏–Ω–≥–∞.

> –§–æ—Ä–º–∞—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç: —ç—Ç–æ –ø–ª—é—Å—ã –¥–ª—è —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –æ—Ç–ª–∞–¥–∫–∏, –Ω–æ –º–∏–Ω—É—Å ‚Äì
> –Ω–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å–∏–º–≤–æ–ª–∞ `\n/` –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞, –ø–æ–¥–∫–∞—Ç–∞–ª–æ–≥–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –∫–∞–∫ —á–∞—Å—Ç—å
> —Ç–µ–∫—Å—Ç–∞ –ø—É—Ç–∏, –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è.

---

## üíª –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã CLI

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `HELP` | –≤—ã–≤–µ—Å—Ç–∏ –ø–æ–¥—Å–∫–∞–∑–∫—É |
| `SELECT <path>` | –Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ |
| `INSERT <path>` | —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—É—Å—Ç–æ–π —Ñ–∞–π–ª |
| `UPDATE <path>` | –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å —Ñ–∞–π–ª; –≤–≤–æ–¥–∏—Ç–µ –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–π —Ç–µ–∫—Å—Ç, –∑–∞–∫–æ–Ω—á–∏—Ç–µ —Å—Ç—Ä–æ–∫–æ–π `.` |
| `DELETE <path>` | —É–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª |
| `CRYPTO <path> <key>` | –∑–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ XOR-—à–∏—Ñ—Ä–æ–º —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –∫–ª—é—á–æ–º |
| `DECRYPTO <path> <key>` | —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª —Ç–µ–º –∂–µ –∫–ª—é—á–æ–º |
| `COUNT` | –≤—ã–≤–µ—Å—Ç–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ –≤ –§–° |
| `RENAME <oldPath> <newPath>` | –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å/–ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —Ñ–∞–π–ª |
| `EXIT` | —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É |

### –ü—Ä–∏–º–µ—Ä —Å–µ–∞–Ω—Å–∞

```
> INSERT /hello.txt
–ì–æ—Ç–æ–≤–æ
> UPDATE /hello.txt
–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (—Å—Ç—Ä–æ–∫–∞ "." –∑–∞–≤–µ—Ä—à–∞–µ—Ç –≤–≤–æ–¥):
–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!
.
–ü–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω–æ
> COUNT
1
> CRYPTO /hello.txt mykey
–ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ
> DECRYPTO /hello.txt mykey
–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ
> RENAME /hello.txt /docs/hello.txt
–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–æ
> EXIT
–ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã. –ü–æ–∫–∞!
```

---

## üõ†Ô∏è –î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

* **In-memory** —Ö—Ä–∞–Ω–µ–Ω–∏–µ: –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –≤–µ—Å—å –¥–∏—Å–∫ —á–∏—Ç–∞–µ—Ç—Å—è –≤ RAM ‚Üí –≤—ã—Å–æ–∫–∞—è
  —Å–∫–æ—Ä–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π, –æ–¥–Ω–∞–∫–æ —Ä–∞–∑–º–µ—Ä –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –¥–æ—Å—Ç—É–ø–Ω–æ–π –ø–∞–º—è—Ç—å—é.
* –õ–∏–Ω–µ–π–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –º–∞—Å—Å–∏–≤—É `FileEntry` ‚Äî O(_n_). –î–ª—è –∫—Ä—É–ø–Ω—ã—Ö –∞—Ä—Ö–∏–≤–æ–≤ –º–æ–∂–Ω–æ
  –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Ö–µ—à-—Ç–∞–±–ª–∏—Ü—É –∏–ª–∏ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –¥–µ—Ä–µ–≤–æ.
* `fs_load()` –∏ `fs_save()` —Å—Ç—Ä–æ–≥–æ —Å–ª–µ–¥—É—é—Ç –æ–ø–∏—Å–∞–Ω–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É;
  –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –∏–Ω–¥–µ–∫—Å–æ–≤ –Ω–µ—Ç.
* –ü–æ–¥–∫–∞—Ç–∞–ª–æ–≥–∏ ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —á–∞—Å—Ç—å —Å—Ç—Ä–æ–∫–∏ –ø—É—Ç–∏ (`/dir/sub/file`). –§–∏–∑–∏—á–µ—Å–∫–æ–π
  –∏–µ—Ä–∞—Ä—Ö–∏–∏ –Ω–µ—Ç, –Ω–æ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å –∞–±—Å–æ–ª—é—Ç–Ω—ã–º –ø—É—Ç—ë–º, —Ç–∞–∫ —á—Ç–æ –ø—Ä–æ–±–ª–µ–º –Ω–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç.
* –ö–æ–¥ –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è C11, warning-clean –ø—Ä–∏ `-Wall -Wextra`.

---

## üöÄ –ò–¥–µ–∏ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è

* **–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ –∏ —Ç–µ–∫—É—â–∏–π –∫–∞—Ç–∞–ª–æ–≥** –≤ CLI
* –°–∂–∞—Ç–∏–µ –∏–ª–∏ –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
* –ò–Ω–¥–µ–∫—Å –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è `SELECT`/`DELETE`
* –ñ—É—Ä–Ω–∞–ª —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π / –æ—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø—Ä–∏ –∫—Ä—ç—à–µ
* –ë–∏–±–ª–∏–æ—Ç–µ—á–Ω—ã–π —Ä–µ–∂–∏–º (linkable .a/.so) –∏ —Ç–µ—Å—Ç–æ–≤—ã–π –Ω–∞–±–æ—Ä (CTest)
* GUI-–æ–±–æ–ª–æ—á–∫–∞ –Ω–∞ GTK/Qt –∏–ª–∏ –≤–µ–±-frontend
